---
title: 02.åˆ›å»ºäº§å“ä¸é…ç½®
date: 2025-03-05 21:25:02
permalink: /iot/tcp/createProduct
categories:
  - è®¾å¤‡æ¥å…¥
tags:
  - è®¾å¤‡æ¥å…¥
---

# ä¸»è¦æ­¥éª¤

::: details å¿…çœ‹ {open}

- 1.åˆ›å»ºäº§å“-é€‰æ‹©TCP
- 2.è®¾ç½®ç‰©æ¨¡å‹æˆ–è€…å¯¼å…¥
- 3.è®¾ç½®TCPçš„å‚æ•°
- 4.ç»‘å®šç«¯å£ã€å¯åŠ¨
  :::

## å…ˆçœ‹è§†é¢‘

ã€NexIoTã€‘TCP å…¨æµç¨‹ï½œè°ƒè¯•ç¥æŠ€å·§ï¼šé»˜è®¤è®¾å¤‡å…œåº•ï¼Œå…ˆæ˜¾æ¶ˆæ¯å†æè§£æã€‘

::: video bilibili
BV1gr2WBiEmD
:::



## 1ã€åˆ›å»ºäº§å“

äº§å“åˆ›å»ºé¡µé¢ï¼Œé€‰æ‹©TCPæ¥å…¥æ–¹å¼ï¼Œé…ç½®äº§å“çš„åŸºæœ¬ä¿¡æ¯

![create](/02/connected/02create.png "äº§å“åˆ›å»ºé¡µé¢ - é€‰æ‹©TCPæ¥å…¥æ–¹å¼å¹¶é…ç½®åŸºæœ¬ä¿¡æ¯")

## 2ã€å¯¼å…¥ç‰©æ¨¡å‹

> ç‚¹å‡»å³ä¾§->ç›´æ¥å¤åˆ¶

```json
{
  "tags": [],
  "events": [
    { "id": "overload", "name": "è¿‡è½½æŠ¥è­¦", "valueType": { "type": "int", "unit": "W" } },
    { "id": "online", "name": "ä¸Šçº¿", "valueType": { "type": "string" } },
    { "id": "offline", "name": "ä¸‹çº¿", "valueType": { "type": "string" } }
  ],
  "functions": [
    {
      "id": "switch",
      "name": "å¼€å…³æ§åˆ¶",
      "config": false,
      "inputs": [
        {
          "id": "state",
          "valueType": {
            "type": "enum",
            "elements": [
              { "text": "å¼€", "value": "01" },
              { "text": "å…³", "value": "00" }
            ]
          }
        },
        { "id": "deviceId", "name": "è®¾å¤‡ç¼–å·", "valueType": { "type": "string", "expands": { "maxLength": "50" } } }
      ],
      "output": {}
    }
  ],
  "properties": [
    {
      "id": "powerState",
      "mode": "rw",
      "name": "å¼€å…³çŠ¶æ€",
      "valueType": {
        "type": "enum",
        "elements": [
          { "text": "å¼€", "value": "01" },
          { "text": "å…³", "value": "00" }
        ]
      }
    },
    { "id": "current", "mode": "r", "name": "ç”µæµ", "valueType": { "type": "float", "unit": "A" } },
    { "id": "voltage", "mode": "r", "name": "ç”µå‹", "valueType": { "type": "float", "unit": "V" } },
    { "id": "power", "mode": "r", "name": "åŠŸç‡", "valueType": { "type": "int", "unit": "W" } }
  ]
}
```

## 3ã€è®¾ç½®TCPæ•°æ®å‚æ•°

::: tip

- 1.ç‚¹å‡»`ç«¯äº‘é…ç½®`ç¼–è¾‘æŒ‰é’®ï¼Œ,è®²æ•°æ®è§£ç æ”¹ä¸º`16è¿›åˆ¶`ã€å®é™…æƒ…å†µ`æŒ‰éœ€è°ƒæ•´`
  :::

äº§å“è¯¦æƒ…é…ç½®é¡µé¢ï¼Œè®¾ç½®TCPæ•°æ®è§£æå‚æ•°ï¼ŒåŒ…æ‹¬æ•°æ®æ ¼å¼ã€è§£ç æ–¹å¼ç­‰

![detail](/02/connected/02detail.png "äº§å“è¯¦æƒ…é…ç½® - è®¾ç½®TCPæ•°æ®è§£æå‚æ•°")

::: tip

- `æ°¸è¿œé€šè¿‡é¢„è§£ç è·å–è®¾å¤‡åºåˆ—å·`ï¼šæˆ‘å¿…é¡»å…ˆæ‹¿åˆ°è®¾å¤‡`deviceId`ï¼Œè®°ä½å…³é”®å­—`preDecode`ã€‚
- æ²¡æœ‰æ ‡å‡†ã€åªèƒ½å¦¥åï¼Œä¸æ˜¯æ¯ä¸€æ¬¾è®¾å¤‡éƒ½å¾ˆè‰¯å¿ƒï¼Œåœ¨åè®®å±‚æŒ‰ç…§ä½ çš„æ€è·¯æ¥ï¼Œä½ æ˜¯å‚å®¶çš„è¯`è¯·æ— è§†`ï¼
  :::

ç«¯äº‘é…ç½®è¯¦ç»†è®¾ç½®é¡µé¢ï¼Œé…ç½®TCPè¿æ¥çš„è¯¦ç»†å‚æ•°ï¼ŒåŒ…æ‹¬é¢„è§£ç è®¾ç½®ç­‰

![detaforil](/02/connected/02forupdate.png "ç«¯äº‘é…ç½®è¯¦ç»†è®¾ç½® - é…ç½®TCPè¿æ¥çš„è¯¦ç»†å‚æ•°")

## 4ã€å…³é”®å‚æ•°è§£æ

```json
{
  "preStore": "true",
  "enabled": "true",
  "alwaysPreDecode": "true", //é€ä¼ éæ ‡ä¸€èˆ¬æ˜¯å¿…é¡»ï¼Œéœ€è¦åœ¨åè®®æ’ä»¶å†™preDecord,è§£æå‡ºdeviceId
  "onlyCache": "false",
  "encoderType": "HEX", //ç¼–ç æ•°æ®ç±»å‹->ä¸‹å‘ç»™è®¾å¤‡
  "decoderType": "HEX", //è§£ç çš„æ•°æ®ç±»å‹->ä¸ŠæŠ¥å¹³å°
  "parserType": "DIRECT"
}
```

## 5ã€åˆ›å»ºç½‘ç»œç»„ä»¶ã€è®¾ç½®ç«¯å£å¹¶å¯åŠ¨

- æœ¬æ¬¡æˆ‘è®¾ç½®ä¸º`12344`,å¯åŠ¨

### ç«¯å£12344

![network](/02/connected/02network.png "network")

### å¯åŠ¨

![log](/02/connected/02log.png "log")

## 6ã€å‘é€ä¸€æ¡æ¶ˆæ¯

![print](/02/connected/02last.png "print")

::: warning ğŸš§

- æ•°æ®æ­£å¸¸ä¸ŠæŠ¥ã€ä½†æ˜¯éœ€è¦ç¼–å†™preDecodeï¼Œä¸ç„¶ä¸çŸ¥é“å“ªä¸ªè®¾å¤‡
  :::
