---
title: 02.创建产品与配置
date: 2025-03-05 21:25:02
permalink: /iot/tcp/createProduct
categories:
  - 设备接入
tags:
  - 设备接入
---

# 主要步骤

::: details 必看 {open}

- 1.创建产品-选择TCP
- 2.设置物模型或者导入
- 3.设置TCP的参数
- 4.绑定端口、启动
  :::

## 1、创建产品

产品创建页面，选择TCP接入方式，配置产品的基本信息

![create](/02/connected/02create.png "产品创建页面 - 选择TCP接入方式并配置基本信息")

## 2、导入物模型

> 点击右侧->直接复制

```json
{
  "tags": [],
  "events": [
    { "id": "overload", "name": "过载报警", "valueType": { "type": "int", "unit": "W" } },
    { "id": "online", "name": "上线", "valueType": { "type": "string" } },
    { "id": "offline", "name": "下线", "valueType": { "type": "string" } }
  ],
  "functions": [
    {
      "id": "switch",
      "name": "开关控制",
      "config": false,
      "inputs": [
        {
          "id": "state",
          "valueType": {
            "type": "enum",
            "elements": [
              { "text": "开", "value": "01" },
              { "text": "关", "value": "00" }
            ]
          }
        },
        { "id": "deviceId", "name": "设备编号", "valueType": { "type": "string", "expands": { "maxLength": "50" } } }
      ],
      "output": {}
    }
  ],
  "properties": [
    {
      "id": "powerState",
      "mode": "rw",
      "name": "开关状态",
      "valueType": {
        "type": "enum",
        "elements": [
          { "text": "开", "value": "01" },
          { "text": "关", "value": "00" }
        ]
      }
    },
    { "id": "current", "mode": "r", "name": "电流", "valueType": { "type": "float", "unit": "A" } },
    { "id": "voltage", "mode": "r", "name": "电压", "valueType": { "type": "float", "unit": "V" } },
    { "id": "power", "mode": "r", "name": "功率", "valueType": { "type": "int", "unit": "W" } }
  ]
}
```

## 3、设置TCP数据参数

::: tip

- 1.点击`端云配置`编辑按钮，,讲数据解码改为`16进制`、实际情况`按需调整`
  :::

产品详情配置页面，设置TCP数据解析参数，包括数据格式、解码方式等

![detail](/02/connected/02detail.png "产品详情配置 - 设置TCP数据解析参数")

::: tip

- `永远通过预解码获取设备序列号`：我必须先拿到设备`deviceId`，记住关键字`preDecode`。
- 没有标准、只能妥协，不是每一款设备都很良心，在协议层按照你的思路来，你是厂家的话`请无视`！
  :::

端云配置详细设置页面，配置TCP连接的详细参数，包括预解码设置等

![detaforil](/02/connected/02forupdate.png "端云配置详细设置 - 配置TCP连接的详细参数")

## 4、关键参数解析

```json
{
  "preStore": "true",
  "enabled": "true",
  "alwaysPreDecode": "true", //透传非标一般是必须，需要在协议插件写preDecord,解析出deviceId
  "onlyCache": "false",
  "encoderType": "HEX", //编码数据类型->下发给设备
  "decoderType": "HEX", //解码的数据类型->上报平台
  "parserType": "DIRECT"
}
```

## 5、创建网络组件、设置端口并启动

- 本次我设置为`12344`,启动

### 端口12344

![network](/02/connected/02network.png "network")

### 启动

![log](/02/connected/02log.png "log")

## 6、发送一条消息

![print](/02/connected/02last.png "print")

::: warning 🚧

- 数据正常上报、但是需要编写preDecode，不然不知道哪个设备
  :::
