---
title: 01.Java SDKä½¿ç”¨æŒ‡å—
date: 2025-03-05 21:25:02
permalink: /iot/http/java-sdk
categories:
  - è®¾å¤‡æ¥å…¥
tags:
  - è®¾å¤‡æ¥å…¥
---

# Java SDKä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»Universal IoT Platformçš„Java SDKä½¿ç”¨æ–¹æ³•ï¼ŒåŒ…æ‹¬SDKå®‰è£…ã€APIè°ƒç”¨ã€ç¤ºä¾‹ä»£ç ç­‰å†…å®¹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”§ **è®¾å¤‡ç®¡ç†**: æ”¯æŒè®¾å¤‡çš„æ³¨å†Œã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤
- ğŸ“¡ **è®¾å¤‡é€šä¿¡**: æ”¯æŒè®¾å¤‡ä¸Šçº¿ã€ä¸‹çº¿çŠ¶æ€ç®¡ç†
- ğŸ“Š **æ•°æ®ä¸ŠæŠ¥**: æ”¯æŒå±æ€§ä¸ŠæŠ¥å’Œäº‹ä»¶ä¸ŠæŠ¥
- ğŸ” **å®‰å…¨è®¤è¯**: æ”¯æŒOAuth2å®¢æˆ·ç«¯è®¤è¯å’Œå¯†ç è®¤è¯
- ğŸ› ï¸ **æ˜“äºé›†æˆ**: æä¾›ç®€æ´çš„APIæ¥å£ï¼Œæ˜“äºé›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

## ç¯å¢ƒè¦æ±‚

- Java 8 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6+ æˆ– Gradle 6.0+
- ç½‘ç»œè¿æ¥ï¼ˆç”¨äºè®¿é—®IoTå¹³å°APIï¼‰

## å¿«é€Ÿå¼€å§‹

### 1. æ·»åŠ ä¾èµ–

#### Maven

```xml
<dependency>
    <groupId>cc.nexiot</groupId>
    <artifactId>nexiot-openapi-sdk</artifactId>
    <version>1.0.0</version>
</dependency>
```


### 2. é…ç½®è®¤è¯ä¿¡æ¯

åœ¨ `src/main/resources/config/` ç›®å½•ä¸‹åˆ›å»º `nexiot.properties` æ–‡ä»¶ï¼š

```properties
é…ç½®æ–‡ä»¶ä½ç½®ï¼šclasspath:resources/config/nexiot.properties
# åè®®é…ç½®ï¼ˆé»˜è®¤HTTPï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å¯ç”¨HTTPSï¼‰
iot.sdk.enable.https=false

# æœåŠ¡å™¨åœ°å€ï¼ˆä¸åŒ…å«åè®®å‰ç¼€http/httpsï¼‰
universal.iot.host=iot.192886.xyz:81

# OAuth2å®¢æˆ·ç«¯å‡­è¯
universal.iot.clientId=Zp6aTa9hQit8I3jw
universal.iot.clientSecret=è¯·å…ˆåœ¨åº”ç”¨ä¿¡æ¯ä¸­æ˜¾ç¤ºå¯†é’¥

# æˆæƒæ¨¡å¼é…ç½®
# password: å¯†ç æ¨¡å¼ï¼Œéœ€è¦æä¾›ç”¨æˆ·åå¯†ç 
# client_credentials: å®¢æˆ·ç«¯æ¨¡å¼ï¼Œä»…ä½¿ç”¨clientIdå’ŒclientSecretï¼ˆæ¨èï¼‰
universal.iot.grantType=client_credentials

# å¯†ç æ¨¡å¼ä¸“ç”¨é…ç½®ï¼ˆä»…å½“grantType=passwordæ—¶éœ€è¦ï¼‰
# universal.iot.username=your-username
# universal.iot.password=your-password
```

### 3. å®Œæ•´çš„ç¤ºä¾‹

```java
/** æ–°å¢è®¾å¤‡ */
  @Test
  public void http_01_register() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    CreateDeviceRequest request = new CreateDeviceRequest(productKey);
    request.setDeviceId(deviceId);
    request.setDeviceName(deviceName);
    request.setLatitude("41.22561");
    request.setLongitude("121.12475");
    request.setIgnoreRepeat(true);
    request.addData("code", "123456");
    String reso = nexClient.register(request);
    System.out.println(reso);
    Assert.assertNotNull(reso);
    ThreadUtil.sleep(5000);
  }

  /** è®¾å¤‡ä¸Šçº¿ */
  @Test
  public void http_02_online() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    GeneralResponse result = nexClient.online(productKey, deviceId);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(1000);
  }

  /** äº‹ä»¶ä¸ŠæŠ¥ */
  @Test
  public void http_03_event() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    // äº§ç”Ÿäº‹ä»¶åŒ…å«çš„ç‰©æ¨¡å‹å±æ€§
    Map<String, Object> data = new HashMap<>();
    data.put("temp", "20");
    GeneralResponse result = nexClient.reportEvent(productKey, deviceId, "powerOffAlarm", data);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(2000);
  }

  /** å±æ€§ä¸ŠæŠ¥ */
  @Test
  public void http_04_properties() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    Map<String, Object> properties = new HashMap<>();
    // ç‰©æ¨¡å‹å±æ€§
    properties.put("switchStatus", 1);
    GeneralResponse result = nexClient.reportProperties(productKey, deviceId, properties);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(2000);
  }

  /** è®¾å¤‡ä¿®æ”¹ */
  @Test
  public void http_05_update() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    UpdateDeviceRequest updateDeviceRequest = new UpdateDeviceRequest(productKey, deviceId);
    updateDeviceRequest.setDetail("iot_05_update");
    updateDeviceRequest.setDeviceName(deviceName + "_remark");
    updateDeviceRequest.setLatitude("123.1234");
    updateDeviceRequest.setLongitude("32.1234");
    GeneralResponse result = nexClient.update(updateDeviceRequest);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(1000);
  }

  /** è®¾å¤‡è¯¦æƒ… */
  @Test
  public void http_06_info() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    GeneralResponse result = nexClient.query(productKey, deviceId);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(1000);
  }

  /** è®¾å¤‡åˆ é™¤ */
  @Test
  public void http_07_del() throws ClientException {
    IoTClient nexClient = new IoTClientImpl();
    GeneralResponse result = nexClient.delete(productKey, deviceId);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
    ThreadUtil.sleep(1000);
  }

  /** åŠŸèƒ½è°ƒç”¨ */
  @Test
  public void http_08_function() throws ClientException {
    String productKey = "Ru871cfJjhoM";
    String deviceId = "nex123321";
    String function = "setDeviceDesiredProperties"; // è®¾ç½®è®¾å¤‡æœŸæœ›å€¼
    IoTClient nexClient = new IoTClientImpl();
    Map<String, Object> data = new HashMap<>();
    // ç‰©æ¨¡å‹å±æ€§
    data.put("code", "yeah!NexIoT");
    GeneralResponse result = nexClient.downFunction(productKey, deviceId, function, data);
    System.out.println(result);
    Assert.assertEquals(result.getCode(), 0);
  }
```

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è·å–äº§å“å¯†é’¥ (productKey)ï¼Ÿ

A: äº§å“å¯†é’¥éœ€è¦åœ¨IoTå¹³å°çš„ `åŒ—å‘åº”ç”¨` åˆ›å»ºäº§å“åè·å¾—ã€‚

### Q2: è®¾å¤‡`deviceId`å¯ä»¥é‡å¤å—ï¼Ÿ

A: è®¾å¤‡deviceIdåœ¨åŒä¸€äº§å“ä¸‹å¿…é¡»å”¯ä¸€ï¼Œå»ºè®®ä½¿ç”¨æœ‰æ„ä¹‰çš„æ ‡è¯†ç¬¦ã€‚

### Q3: å¦‚ä½•å¤„ç†ç½‘ç»œè¶…æ—¶ï¼Ÿ

A: å»ºè®®å®ç°é‡è¯•æœºåˆ¶ï¼Œå¹¶è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ã€‚

### Q4: æ”¯æŒå“ªäº›æ•°æ®ç±»å‹çš„å±æ€§ä¸ŠæŠ¥ï¼Ÿ

A: æ”¯æŒåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆStringã€Integerã€Doubleã€Booleanç­‰ï¼‰å’Œå¤æ‚å¯¹è±¡ã€‚

### Q5: å¦‚ä½•æ‰¹é‡æ“ä½œè®¾å¤‡ï¼Ÿ

A: ç›®å‰SDKæ”¯æŒå•ä¸ªè®¾å¤‡æ“ä½œï¼Œæ‰¹é‡æ“ä½œéœ€è¦å¾ªç¯è°ƒç”¨APIã€‚
